{% extends "erp/_app_base.html" %}
{% load i18n %}

{% block title %}Veranstaltung{% endblock %}

{% block app_breadcrumb %}{{ course.event_number }} - {{ course.title }}{% endblock %}
{% block app_actions %}
    <a class="btn btn-outline-secondary" href="/erp/courses/">{% trans "Zur체ck" %}</a>
    <a class="btn btn-primary" href="/erp/courses/{{ course.id }}/edit/">{% trans "Bearbeiten" %}</a>
{% endblock %}

{% block app_content %}

    <div class="row g-3">
        <div class="col-lg-7">
            <div class="card mb-3">
                <div class="card-header">{% trans "Stammdaten" %}</div>
                <div class="card-body">
                    <div><strong>{% trans "Kunde" %}:</strong> {{ course.customer|default:"-" }}</div>
                    <div><strong>{% trans "Externe Mitarbeiter" %}:</strong>
                        {% for inst in course.instructors.all %}{{ inst.name }}{% if not forloop.last %}, {% endif %}{% empty %}-{% endfor %}
                    </div>
                    <div><strong>{% trans "Interne Mitarbeiter" %}:</strong>
                        {% for emp in course.employees.all %}{{ emp.name }}{% if not forloop.last %}, {% endif %}{% empty %}-{% endfor %}
                    </div>
                    <div><strong>{% trans "Skill" %}:</strong> {{ course.required_skill|default:"-" }}</div>
                    <div><strong>{% trans "Status" %}:</strong> {{ course.get_status_display }}</div>
                    <div><strong>{% trans "Start" %}:</strong> {{ course.start_date|default:"-" }}</div>
                    <div><strong>{% trans "Ende" %}:</strong> {{ course.end_date|default:"-" }}</div>
                    <div><strong>{% trans "Kapazit채t" %}:</strong> {{ course.capacity }}</div>
                    <div><strong>{% trans "Mobiler Klassenraum" %}:</strong>
                        {% if course.mobile_classroom_required %}{% trans "Ja" %}{% else %}{% trans "Nein" %}{% endif %}
                    </div>
                    <div><strong>{% trans "Klassenraum-Produkt" %}:</strong> {{ course.mobile_classroom_product|default:"-" }}</div>
                </div>
            </div>

            <div class="card mb-3">
                <div class="card-header">{% trans "Verkn체pfungen" %}</div>
                <div class="card-body">
                    <div><strong>{% trans "Work Order" %}:</strong> {{ course.work_order|default:"-" }}</div>
                    <div><strong>{% trans "Vertrag" %}:</strong> {{ course.contract|default:"-" }}</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">{% trans "Beschreibung" %}</div>
                <div class="card-body">
                    {{ course.description|default:"-" }}
                </div>
            </div>
        </div>

        <div class="col-lg-5">
            <div class="card mb-3">
                <div class="card-header">{% trans "Preisaufschl체sselung" %}</div>
                <div class="card-body">
                    <div><strong>{% trans "Einsatztage" %}:</strong> {{ pricing.days }}</div>
                    <div><strong>{% trans "Tagessatz" %}:</strong> {{ pricing.instructor_daily }}</div>
                    <div><strong>{% trans "Ext. MA-Kosten" %}:</strong> {{ pricing.instructor_cost }}</div>
                    <div><strong>{% trans "Spesen" %}:</strong> {{ pricing.expenses }}</div>
                    <div><strong>{% trans "Unterkunft" %}:</strong> {{ pricing.lodging }}</div>
                    <div><strong>{% trans "Mobiler Klassenraum" %}:</strong> {{ pricing.mobile_cost }}</div>
                    <hr>
                    <div><strong>{% trans "Zwischensumme Netto" %}:</strong> {{ pricing.subtotal }}</div>
                    <div><strong>{% trans "MwSt" %}:</strong> {{ pricing.vat_rate }}%</div>
                    <div><strong>{% trans "Preis Netto" %}:</strong> {{ pricing.price_net }}</div>
                    <div><strong>{% trans "Preis Brutto" %}:</strong> {{ pricing.price_gross }}</div>
                </div>
            </div>
            <div class="card">
                <div class="card-header">{% trans "Hinweis" %}</div>
                <div class="card-body text-muted small">
                    {% trans "Der Preis wird automatisch aus Tagessatz, Spesen, Unterkunft und optionalem Klassenraum berechnet." %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
