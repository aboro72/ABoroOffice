{% extends "base.html" %}
{% block content %}
<div class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="mb-0">Konkurrenz-Debug</h2>
        <a class="btn btn-outline-secondary" href="/erp/">Zurueck</a>
    </div>
    {% if debug %}
        <div class="card">
            <div class="card-header">Letzter Abruf</div>
            <div class="card-body">
                <div><strong>Zeit:</strong> {{ debug.at }}</div>
                <div><strong>Query:</strong> {{ debug.query }}</div>
                <div><strong>URL:</strong> {{ debug.url }}</div>
                <div><strong>Preis:</strong> {{ debug.price|default:"-" }}</div>
                <div><strong>Quelle:</strong> {{ debug.source }}</div>
                <hr>
                <div class="small text-muted mb-2">HTML-Auszug (erste 8000 Zeichen)</div>
                <pre class="bg-light p-3 rounded" style="white-space: pre-wrap;">{{ debug.html_snippet }}</pre>
            </div>
        </div>
    {% else %}
        <div class="alert alert-warning">Noch kein Abruf gespeichert.</div>
    {% endif %}
</div>
{% endblock %}
